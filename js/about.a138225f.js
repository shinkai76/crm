(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"11e9":function(t,e,a){var r=a("52a7"),n=a("4630"),o=a("6821"),i=a("6a99"),l=a("69a8"),s=a("c69a"),c=Object.getOwnPropertyDescriptor;e.f=a("9e1e")?c:function(t,e){if(t=o(t),e=i(e,!0),s)try{return c(t,e)}catch(t){}if(l(t,e))return n(!r.f.call(t,e),t[e])}},"443a":function(t,e,a){},"49d1":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"shops"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.tableData}},[a("el-table-column",{attrs:{align:"center",prop:"id",label:"账套"}}),a("el-table-column",{attrs:{align:"center",prop:"set_of_book",label:"账套号"}}),a("el-table-column",{attrs:{align:"center",prop:"default_store_name",label:"默认仓库"}}),a("el-table-column",{attrs:{align:"center",prop:"default_bill_type_name",label:"默认发票类型"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.handleEdit(e.$index,e.row)}}},[t._v("编辑\n                  ")])]}}])})],1),a("el-dialog",{attrs:{title:"编辑店铺",visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"form",attrs:{model:t.postData,"label-width":"120px",size:"mini"}},[a("el-form-item",{attrs:{label:"CRM令牌"}},[a("el-input",{model:{value:t.postData.user_token,callback:function(e){t.$set(t.postData,"user_token","string"===typeof e?e.trim():e)},expression:"postData.user_token"}})],1),a("el-form-item",{attrs:{label:"默认仓库"}},[a("el-select",{attrs:{placeholder:"请选择默认仓库"},model:{value:t.postData.default_store_id,callback:function(e){t.$set(t.postData,"default_store_id",e)},expression:"postData.default_store_id"}},t._l(t.storeList,function(t){return a("el-option",{attrs:{label:t.name,value:t.id}})}))],1),a("el-form-item",{attrs:{label:"默认发票类型"}},[a("el-select",{attrs:{placeholder:"请选择默认发票类型"},model:{value:t.postData.default_bill_type,callback:function(e){t.$set(t.postData,"default_bill_type",e)},expression:"postData.default_bill_type"}},t._l(t.bill_type_list,function(t){return a("el-option",{attrs:{label:t.name,value:t.val}})}))],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.resetForm()}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm()}}},[t._v("确 定")])],1)],1)],1)},n=[],o=(a("7f7f"),a("cadf"),a("551c"),a("097d"),{name:"shops",data:function(){return{storeList:[],dialogVisible:!1,postData:{user_token:"",default_store_id:"",default_bill_type:""},tableData:[],bill_type_list:[{name:"收据",val:0},{name:"发票",val:1},{name:"增值税发票",val:2}],rowIndex:0}},mounted:function(){this.getShopDate()},methods:{resetForm:function(){for(var t in this.postData)this.postData[t]="";this.dialogVisible=!1},submitForm:function(){var t=this,e=this.tableData[this.rowIndex].id;this.$axios({url:"/api/set_of_books/"+e,method:"PUT",data:this.postData}).then(function(e){if(1===e.state)return t.dialogVisible=!1,t.getShopDate(),void t.$message({message:"更新成功",type:"success"});alert(e.errmsg)})},handleEdit:function(t,e){this.rowIndex=t;var a=this.$root.$data.infoData;this.storeList=a.cache.store,this.dialogVisible=!0,this.postData.default_bill_type=this.tableData[0].default_bill_type,this.postData.default_store_id=this.tableData[0].default_store_id},getShopDate:function(){var t=this,e=this.$root.$data.infoData;this.tableData=[],this.$axios({url:"/api/set_of_books",params:{set_of_book:e.user.set_of_book}}).then(function(a){a.default_store_name=e.cache.store[a.default_store_id].name,a.default_bill_type_name=t.bill_type_list[a.default_bill_type].name,t.tableData.push(a)})}}}),i=o,l=(a("eded"),a("2877")),s=Object(l["a"])(i,r,n,!1,null,"5c220028",null);s.options.__file="Shops.vue";e["default"]=s.exports},"49de":function(t,e,a){"use strict";var r=a("443a"),n=a.n(r);n.a},"52a7":function(t,e){e.f={}.propertyIsEnumerable},"5dbc":function(t,e,a){var r=a("d3f4"),n=a("8b97").set;t.exports=function(t,e,a){var o,i=e.constructor;return i!==a&&"function"==typeof i&&(o=i.prototype)!==a.prototype&&r(o)&&n&&n(t,o),t}},"66cb":function(t,e,a){},"8b97":function(t,e,a){var r=a("d3f4"),n=a("cb7c"),o=function(t,e){if(n(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,a){return o(t,a),e?t.__proto__=a:r(t,a),t}}({},!1):void 0),check:o}},9093:function(t,e,a){var r=a("ce10"),n=a("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,n)}},"96cf":function(t,e){!function(e){"use strict";var a,r=Object.prototype,n=r.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag",c="object"===typeof t,u=e.regeneratorRuntime;if(u)c&&(t.exports=u);else{u=e.regeneratorRuntime=c?t.exports:{},u.wrap=g;var d="suspendedStart",p="suspendedYield",f="executing",m="completed",h={},b={};b[i]=function(){return this};var v=Object.getPrototypeOf,_=v&&v(v(N([])));_&&_!==r&&n.call(_,i)&&(b=_);var y=L.prototype=x.prototype=Object.create(b);F.prototype=y.constructor=L,L.constructor=F,L[s]=F.displayName="GeneratorFunction",u.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===F||"GeneratorFunction"===(e.displayName||e.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,L):(t.__proto__=L,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(y),t},u.awrap=function(t){return{__await:t}},S(k.prototype),k.prototype[l]=function(){return this},u.AsyncIterator=k,u.async=function(t,e,a,r){var n=new k(g(t,e,a,r));return u.isGeneratorFunction(e)?n:n.next().then(function(t){return t.done?t.value:n.next()})},S(y),y[s]="Generator",y[i]=function(){return this},y.toString=function(){return"[object Generator]"},u.keys=function(t){var e=[];for(var a in t)e.push(a);return e.reverse(),function a(){while(e.length){var r=e.pop();if(r in t)return a.value=r,a.done=!1,a}return a.done=!0,a}},u.values=N,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=a)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return l.type="throw",l.arg=t,e.next=r,n&&(e.method="next",e.arg=a),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],l=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),T(a),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc===t){var r=a.completion;if("throw"===r.type){var n=r.arg;T(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:N(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=a),h}}}function g(t,e,a,r){var n=e&&e.prototype instanceof x?e:x,o=Object.create(n.prototype),i=new O(r||[]);return o._invoke=D(t,a,i),o}function w(t,e,a){try{return{type:"normal",arg:t.call(e,a)}}catch(t){return{type:"throw",arg:t}}}function x(){}function F(){}function L(){}function S(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function k(t){function e(a,r,o,i){var l=w(t[a],t,r);if("throw"!==l.type){var s=l.arg,c=s.value;return c&&"object"===typeof c&&n.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,o,i)},function(t){e("throw",t,o,i)}):Promise.resolve(c).then(function(t){s.value=t,o(s)},i)}i(l.arg)}var a;function r(t,r){function n(){return new Promise(function(a,n){e(t,r,a,n)})}return a=a?a.then(n,n):n()}this._invoke=r}function D(t,e,a){var r=d;return function(n,o){if(r===f)throw new Error("Generator is already running");if(r===m){if("throw"===n)throw o;return $()}a.method=n,a.arg=o;while(1){var i=a.delegate;if(i){var l=E(i,a);if(l){if(l===h)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(r===d)throw r=m,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r=f;var s=w(t,e,a);if("normal"===s.type){if(r=a.done?m:p,s.arg===h)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(r=m,a.method="throw",a.arg=s.arg)}}}function E(t,e){var r=t.iterator[e.method];if(r===a){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=a,E(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=w(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=a),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function N(t){if(t){var e=t[i];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){while(++r<t.length)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=a,e.done=!0,e};return o.next=o}}return{next:$}}function $(){return{value:a,done:!0}}}(function(){return this}()||Function("return this")())},aa77:function(t,e,a){var r=a("5ca1"),n=a("be13"),o=a("79e5"),i=a("fdef"),l="["+i+"]",s="​",c=RegExp("^"+l+l+"*"),u=RegExp(l+l+"*$"),d=function(t,e,a){var n={},l=o(function(){return!!i[t]()||s[t]()!=s}),c=n[t]=l?e(p):i[t];a&&(n[a]=c),r(r.P+r.F*l,"String",n)},p=d.trim=function(t,e){return t=String(n(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(u,"")),t};t.exports=d},ac6a:function(t,e,a){for(var r=a("cadf"),n=a("0d58"),o=a("2aba"),i=a("7726"),l=a("32e9"),s=a("84f2"),c=a("2b4c"),u=c("iterator"),d=c("toStringTag"),p=s.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},m=n(f),h=0;h<m.length;h++){var b,v=m[h],_=f[v],y=i[v],g=y&&y.prototype;if(g&&(g[u]||l(g,u,p),g[d]||l(g,d,v),s[v]=p,_))for(b in r)g[b]||o(g,b,r[b],!0)}},c0fb:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"bill"}},[a("div",{ref:"mainForm",staticClass:"mainForm"},[a("div",{staticClass:"item"},[a("label",[t._v("合同标题 ")]),a("el-input",{attrs:{placeholder:"合同标题",clearable:"",size:"mini"},model:{value:t.mainForm.title,callback:function(e){t.$set(t.mainForm,"title","string"===typeof e?e.trim():e)},expression:"mainForm.title"}})],1),a("div",{staticClass:"item"},[a("label",[t._v("开始时间 ")]),a("el-date-picker",{attrs:{size:"mini","value-format":"yyyy-MM-dd HH:mm:ss",type:"date"},model:{value:t.mainForm.start_date,callback:function(e){t.$set(t.mainForm,"start_date",e)},expression:"mainForm.start_date"}})],1),a("div",{staticClass:"item"},[a("label",[t._v("截止时间 ")]),a("el-date-picker",{attrs:{size:"mini","value-format":"yyyy-MM-dd HH:mm:ss",type:"date"},model:{value:t.search_end_date,callback:function(e){t.search_end_date=e},expression:"search_end_date"}})],1),a("div",{staticClass:"item"},[a("label",[t._v("合同类型 ")]),a("el-select",{attrs:{clearable:"",size:"mini"},model:{value:t.mainForm.category,callback:function(e){t.$set(t.mainForm,"category",e)},expression:"mainForm.category"}},t._l(t.categoryList,function(t){return a("el-option",{attrs:{label:t.label,value:t.value}})}))],1),a("div",{staticClass:"item"},[a("label",[t._v("合同状态 ")]),a("el-select",{attrs:{clearable:"",size:"mini"},model:{value:t.mainForm.status,callback:function(e){t.$set(t.mainForm,"status",e)},expression:"mainForm.status"}},t._l(t.statusList,function(t){return a("el-option",{attrs:{label:t.label,value:t.value}})}))],1),a("div",{staticClass:"item"},[a("label",[t._v("审批状态 ")]),a("el-select",{attrs:{clearable:"",size:"mini"},model:{value:t.mainForm.approve_status,callback:function(e){t.$set(t.mainForm,"approve_status",e)},expression:"mainForm.approve_status"}},t._l(t.approveStatusList,function(t){return a("el-option",{attrs:{label:t.label,value:t.value}})}))],1),a("div",{staticClass:"item"},[a("label",[t._v("导入状态 ")]),a("el-select",{attrs:{clearable:"",size:"mini"},model:{value:t.mainForm.is_imported,callback:function(e){t.$set(t.mainForm,"is_imported",e)},expression:"mainForm.is_imported"}},[a("el-option",{attrs:{label:"已导入",value:"1"}}),a("el-option",{attrs:{label:"未导入",value:"0"}})],1)],1),a("div",{staticClass:"item"},[a("label",[t._v("下载状态 ")]),a("el-select",{attrs:{clearable:"",placeholder:"请选择",size:"mini"},model:{value:t.mainForm.is_completed,callback:function(e){t.$set(t.mainForm,"is_completed",e)},expression:"mainForm.is_completed"}},[a("el-option",{attrs:{label:"已下载",value:"1"}}),a("el-option",{attrs:{label:"未下载",value:"0"}})],1)],1),a("div",{staticClass:"item"},[a("label",[t._v("时间类型 ")]),a("el-select",{attrs:{clearable:"",size:"mini"},model:{value:t.mainForm.time_type,callback:function(e){t.$set(t.mainForm,"time_type",e)},expression:"mainForm.time_type"}},[a("el-option",{attrs:{label:"审批时间",value:"sign_date"}}),a("el-option",{attrs:{label:"创建时间",value:"created_at"}}),a("el-option",{attrs:{label:"结束时间",value:"end_at"}})],1)],1)]),a("div",{ref:"btns",staticClass:"btns"},[a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){t.searchOrder()}}},[t._v("查询")]),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){t.showDownload=!0}}},[t._v("下载合同列表")]),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){t.downloadManually()}}},[t._v("手动下载合同")]),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){t.resetStatus()}}},[t._v("状态重置")]),a("el-button",{attrs:{type:"warning",size:"mini",plain:""},on:{click:function(e){t.importC8()}}},[t._v("导入C8")]),a("el-button",{attrs:{type:"danger",size:"mini",plain:""},on:{click:function(e){t.deleteOrder()}}},[t._v("删除合同")])],1),a("div",{staticClass:"subTable"},[a("el-table",{ref:"subTable",staticStyle:{width:"100%"},attrs:{size:"mini",border:"",stripe:"",height:t.table_height,data:t.subTable,"empty-text":"-","tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{fixed:"",type:"selection",width:"55"}}),a("el-table-column",{attrs:{type:"expand",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[r.product_assets_for_new_record.items.length?a("table",{staticClass:"table-inline"},[a("thead",[a("tr",[a("th",[t._v("商品名称")]),a("th",[t._v("产品码")]),a("th",[t._v("商品数量")]),a("th",[t._v("商品总价")])])]),a("tbody",t._l(r.product_assets_for_new_record.items,function(e){return a("tr",[a("td",[t._v(t._s(e.name))]),a("td",{staticClass:"t-center"},[t._v(t._s(e.product_no))]),a("td",{staticClass:"t-right"},[t._v(t._s(e.quantity)+" "+t._s(e.sale_unit))]),a("td",{staticClass:"t-right"},[t._v(t._s(e.total_price))])])}))]):a("span",{staticClass:"err"},[t._v("无商品明细")])]}}])}),a("el-table-column",{attrs:{"show-overflow-tooltip":"","header-align":"center",prop:"sn",label:"合同编号",width:"160"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"","header-align":"center",prop:"title",label:"合同标题",width:"200"}}),a("el-table-column",{attrs:{align:"center",prop:"category_mapped",label:"合同类型",width:"120"}}),a("el-table-column",{attrs:{align:"center",prop:"status_mapped",label:"状态",width:"120"}}),a("el-table-column",{attrs:{"header-align":"center",align:"right",prop:"total_amount",label:"合同总金额",width:"120"}}),a("el-table-column",{attrs:{align:"center",prop:"approve_status_i18n",label:"审核状态",width:"120"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"sign_date",label:"签约日期",width:"160"}}),a("el-table-column",{attrs:{align:"center",prop:"creator.name",label:"创建者",width:"120"}}),a("el-table-column",{attrs:{"show-overflow-tooltip":"","header-align":"center",prop:"customer.name",label:"客户信息",width:"160"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"sale_document_code",label:"销售订单单号",width:"180"}}),a("el-table-column",{attrs:{align:"center",prop:"is_imported",label:"是否已导入",width:"120"}}),a("el-table-column",{attrs:{align:"center",prop:"is_completed",label:"是否下载完成",width:"120"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"created_at",label:"合同创建时间",width:"160"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"updated_at",label:"合同更新时间",width:"160"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"imported_at",label:"导入时间",width:"160"}}),a("el-table-column",{attrs:{"header-align":"center",prop:"download_at",label:"下载时间",width:"160"}})],1)],1),a("div",{ref:"pagination",staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[30,50,100],"page-size":t.defalut_limit,layout:"total, sizes,prev, pager, next, jumper",total:t.totalSubTable},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{staticClass:"downLoadDialog",attrs:{title:"下载合同",visible:t.showDownload,width:"70%"},on:{"update:visible":function(e){t.showDownload=e}}},[a("el-form",{attrs:{model:t.downloadForm,"label-width":"100px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"合同标题"}},[a("el-input",{attrs:{placeholder:"合同标题",clearable:"",size:"mini"},model:{value:t.downloadForm.title,callback:function(e){t.$set(t.downloadForm,"title","string"===typeof e?e.trim():e)},expression:"downloadForm.title"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"合同类型"}},[a("el-select",{attrs:{clearable:"",size:"mini",disabled:""},model:{value:t.downloadForm.category,callback:function(e){t.$set(t.downloadForm,"category",e)},expression:"downloadForm.category"}},t._l(t.categoryList,function(t){return a("el-option",{attrs:{label:t.label,value:t.value}})}))],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"合同状态"}},[a("el-select",{attrs:{clearable:"",size:"mini"},model:{value:t.downloadForm.status,callback:function(e){t.$set(t.downloadForm,"status",e)},expression:"downloadForm.status"}},t._l(t.statusList,function(t){return a("el-option",{attrs:{label:t.label,value:t.value}})}))],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"审批状态"}},[a("el-select",{attrs:{clearable:"",size:"mini"},model:{value:t.downloadForm.approve_status,callback:function(e){t.$set(t.downloadForm,"approve_status",e)},expression:"downloadForm.approve_status"}},t._l(t.approveStatusList,function(t){return a("el-option",{attrs:{label:t.label,value:t.value}})}))],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开始时间"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini","value-format":"yyyy-MM-dd HH:mm:ss",type:"date"},model:{value:t.downloadForm.start_date,callback:function(e){t.$set(t.downloadForm,"start_date",e)},expression:"downloadForm.start_date"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"截止时间"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini","value-format":"yyyy-MM-dd HH:mm:ss",type:"date"},model:{value:t.down_end_date,callback:function(e){t.down_end_date=e},expression:"down_end_date"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"时间类型"}},[a("el-select",{attrs:{clearable:"",size:"mini"},model:{value:t.downloadForm.time_type,callback:function(e){t.$set(t.downloadForm,"time_type",e)},expression:"downloadForm.time_type"}},[a("el-option",{attrs:{label:"审批时间",value:"sign_date"}}),a("el-option",{attrs:{label:"创建时间",value:"created_at"}}),a("el-option",{attrs:{label:"结束时间",value:"end_at"}})],1)],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.showDownload=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.startDownload()}}},[t._v("确 定")])],1)],1)],1)},n=[];a("c5f6"),a("96cf");function o(t){return function(){var e=this,a=arguments;return new Promise(function(r,n){var o=t.apply(e,a);function i(t,e){try{var a=o[t](e),i=a.value}catch(t){return void n(t)}a.done?r(i):Promise.resolve(i).then(l,s)}function l(t){i("next",t)}function s(t){i("throw",t)}l()})}}a("ac6a");function i(t){var e;if("function"===typeof Symbol){if(Symbol.asyncIterator&&(e=t[Symbol.asyncIterator],null!=e))return e.call(t);if(Symbol.iterator&&(e=t[Symbol.iterator],null!=e))return e.call(t)}throw new TypeError("Object is not async iterable")}a("cadf"),a("551c"),a("097d");var l={name:"bills",data:function(){return{table_height:500,totalSubTable:0,defalut_limit:50,new_start:0,mainForm:{category:"",status:"",approve_status:"",start_date:"",end_date:"",title:"",is_imported:"",is_completed:"",start:"",limit:"",time_type:""},categoryList:[{label:"不限",value:""},{label:"销售合同",value:"10730677"},{label:"项目合同",value:"10730678"},{label:"采购合同",value:"10730679"},{label:"服务合同",value:"10730680"},{label:"其他",value:"10730681"}],statusList:[{label:"不限",value:""},{label:"未开始",value:"10730686"},{label:"执行中",value:"10730687"},{label:"成功结束",value:"10730688"},{label:"意外终止",value:"10730689"},{label:"货先交，补合同",value:"10849211"},{label:"其他",value:"10849212"}],approveStatusList:[{label:"不限",value:""},{label:"已撤销",value:"reverted"},{label:"已否决",value:"rejected"},{label:"待1级审批",value:1},{label:"待2级审批",value:2},{label:"已通过",value:"approved"}],timeTypeList:[{label:"审批时间",value:"sign_date"},{label:"创建时间",value:"created_at"},{label:"结束时间",value:"end_at"}],subTable:[],multipleSelection:[],currentPage:1,id_arr:[],showDownload:!1,down_end_date:"",search_end_date:"",downloadForm:{category:"10730677",status:"",approve_status:"approved",end_date:"",title:"",time_type:"created_at"}}},mounted:function(){var t=this;this.setDefaultDate(),this.searchOrder(),this.$nextTick(function(){var e=document.documentElement.clientHeight-t.$refs.btns.offsetHeight-t.$refs.mainForm.offsetHeight-t.$refs.pagination.offsetHeight-64;t.table_height=e})},methods:{setDefaultDate:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,r=t.getDate()+1,n=new Date("".concat(e,"-").concat(a,"-01"));this.mainForm.start_date=n,this.downloadForm.start_date=n,this.down_end_date=new Date("".concat(e,"-").concat(a,"-").concat(r-1)),this.search_end_date=new Date("".concat(e,"-").concat(a,"-").concat(r-1))},startDownload:function(){this.showDownload=!1,this.downloadOrder()},handleSizeChange:function(t){this.defalut_limit=t},handleCurrentChange:function(t){this.currentPage=t||this.currentPage,this.new_start=(this.currentPage-1)*this.defalut_limit,this.searchOrder()},handleSelectionChange:function(t){this.multipleSelection=t},getSelectedID:function(){var t=this;return this.multipleSelection.length?(this.id_arr=[],this.multipleSelection.forEach(function(e){t.id_arr.push(e.id)}),!0):(alert("请至少选中一行"),!1)},downloadOrder:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=JSON.parse(JSON.stringify(this.downloadForm));a.page=e,a.per_page=50,a.end_date=this.addDate(this.down_end_date),this.$axios({url:"/api/orders?action=get_orders",params:a}).then(function(a){if(1===a.state)return a.page&&t.downloadOrder(e++),void(null==a.page&&t.$notify({title:"下载列表完成",type:"success"}));alert(a.errmsg)})},downloadManually:function(){this.ajaxFunction("complete_download","GET","手动下载合同")},deleteOrder:function(){this.ajaxFunction(null,"DELETE","删除合同","/api/orders/")},resetStatus:function(){this.ajaxFunction("init_order","GET","重置状态")},importC8:function(){this.ajaxFunction("import","GET","导入C8")},ajaxFunction:function(){var t=o(regeneratorRuntime.mark(function t(e,a,r){var n,o,l,s,c,u,d,p,f,m,h,b=this,v=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=v.length>3&&void 0!==v[3]?v[3]:"",this.getSelectedID()){t.next=3;break}return t.abrupt("return");case 3:o=0,l=0,s=0,c=!0,u=!1,t.prev=8,p=i(this.id_arr);case 10:return t.next=12,p.next();case 12:return f=t.sent,c=f.done,t.next=16,f.value;case 16:if(m=t.sent,c){t.next=23;break}h=m,this.$axios({method:a,url:n?n+h:"/api/orders/".concat(h,"?action=").concat(e)}).then(function(t){1!==t.state?(o++,alert(t.errmsg)):l++}).finally(function(){s++,s==b.id_arr.length&&alert("共".concat(b.id_arr.length,"条，成功").concat(r).concat(l,"条，失败").concat(o,"条"))});case 20:c=!0,t.next=10;break;case 23:t.next=29;break;case 25:t.prev=25,t.t0=t["catch"](8),u=!0,d=t.t0;case 29:if(t.prev=29,t.prev=30,c||null==p.return){t.next=34;break}return t.next=34,p.return();case 34:if(t.prev=34,!u){t.next=37;break}throw d;case 37:return t.finish(34);case 38:return t.finish(29);case 39:this.handleCurrentChange(1),this.multipleSelection=[];case 41:case"end":return t.stop()}},t,this,[[8,25,29,39],[30,,34,38]])}));return function(e,a,r){return t.apply(this,arguments)}}(),addDate:function(t){var e=new Date(t),a=Math.abs(e)+864e5,r=new Date(a),n=r.getFullYear(),o=r.getMonth()+1,i=r.getDate(),l=new Date("".concat(n,"-").concat(o,"-").concat(i));return l},searchOrder:function(){var t=this;this.mainForm.limit=this.defalut_limit,this.mainForm.start=this.new_start;var e=JSON.parse(JSON.stringify(this.mainForm));e.end_date=this.addDate(this.search_end_date),this.$axios({url:"/api/orders?action=trade_view",params:e}).then(function(e){if(1===e.state)return t.totalSubTable=Number(e.total),e.root.forEach(function(t){for(var e in t)t[e]=null==t[e]?"":t[e],"boolean"===typeof t[e]&&(t[e]=1==t[e]?"是":"否")}),void(t.subTable=e.root);alert(e.errmsg)})}}},s=l,c=(a("49de"),a("2877")),u=Object(c["a"])(s,r,n,!1,null,"5cbdf93a",null);u.options.__file="Bills.vue";e["default"]=u.exports},c5f6:function(t,e,a){"use strict";var r=a("7726"),n=a("69a8"),o=a("2d95"),i=a("5dbc"),l=a("6a99"),s=a("79e5"),c=a("9093").f,u=a("11e9").f,d=a("86cc").f,p=a("aa77").trim,f="Number",m=r[f],h=m,b=m.prototype,v=o(a("2aeb")(b))==f,_="trim"in String.prototype,y=function(t){var e=l(t,!1);if("string"==typeof e&&e.length>2){e=_?e.trim():p(e,3);var a,r,n,o=e.charCodeAt(0);if(43===o||45===o){if(a=e.charCodeAt(2),88===a||120===a)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+e}for(var i,s=e.slice(2),c=0,u=s.length;c<u;c++)if(i=s.charCodeAt(c),i<48||i>n)return NaN;return parseInt(s,r)}}return+e};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof m&&(v?s(function(){b.valueOf.call(a)}):o(a)!=f)?i(new h(y(e)),a,m):y(e)};for(var g,w=a("9e1e")?c(h):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;w.length>x;x++)n(h,g=w[x])&&!n(m,g)&&d(m,g,u(h,g));m.prototype=b,b.constructor=m,a("2aba")(r,f,m)}},eded:function(t,e,a){"use strict";var r=a("66cb"),n=a.n(r);n.a},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=about.a138225f.js.map